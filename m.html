<!DOCTYPE html>
<html manifest="/m.appcache">
<head>
  <title>Left</title>

    <meta name='viewport' content='width=device-width'/>
    <meta name="application-name" content="Truefactor" />
    <meta name="apple-mobile-web-app-title" content="Truefactor">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />


  <script>

function add(cur) {
  if(eamount.value.length == 0) return;

  var number = (0 - parseInt(eamount.value))
  eamount.value = '';
  
  if(cur == 'baht'){
    number = Math.round(number / 35.8)
  }
  if(cur == 'salary'){
    number = - number;
  }

  budget += number;
  ebudget.innerHTML = budget;

  localStorage.history += ','+number
  localStorage.historystamp += ','+new Date()
}

window.onload = function(){
  if(!localStorage.history){
    localStorage.history = '0'
    localStorage.historystamp = '0'
  }

  budget = 0;

  h = localStorage.history.split(',')

  for(var i=0;i<h.length;i++){
    budget += parseInt(h[i]);
  }

  ebudget.innerHTML = budget;
}

  </script>
</head>
<body>
<style>
.b{
  width:100%;
  max-width:800px;
  padding-top: 20px;
  padding-bottom: 20px;
  border-radius: 0;
}

</style>
<center>

<p><div class="b" style="font-size: 120px" id=ebudget>0</div></p>

<p><input class=b style="font-size: 80px"  placeholder="Amount" type="text" pattern="\d*" id="eamount"/></p>

<p><button class=b onclick=add('baht')>Spend (Baht)</button></p>

<p><button class=b onclick=add('usd')>Spend (USD)</button></p>

</center>


<br><br><br><br><br><br><br>
<small>
<a href="javascript:if(confirm('clear?')){localStorage.clear()}">Clear localStorage</a>
<a href="javascript:add('salary')">Add salary (USD)</a>
<a href="javascript:document.write(h.join('<br>'))">Show history</a>

</small>
</body>
</html>